<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Contributing - App-Enhance</title>
      
      
      
        <link rel="canonical" href="https://app-enhance.github.io/contributing/">
      
      
        <meta name="author" content="Wojciech Gadziński">
      
    
    <meta property="og:url" content="https://app-enhance.github.io/contributing/">
    <meta property="og:title" content="App-Enhance">
    <meta property="og:image" content="https://app-enhance.github.io/contributing//../images/logo2.jpg">
    <meta name="apple-mobile-web-app-title" content="App-Enhance">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
      <link rel="apple-touch-icon" href="../images/logo2.jpg">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../None">
    <link rel="icon" type="image/x-icon" href="../None">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application-0dac3e5884.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/palettes-05ab2406df.css">
    
    
      
      
      
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class="palette-primary-teal palette-accent-blue-grey">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
          </span>
        
        Contributing
      </div>
    </div>
    
    
      
      <div class="button button-github" role="button" aria-label="GitHub">
        <a href="https://github.com/ermesx" title="@ermesx on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
      </div>
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/app-enhance/ae-docs" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../images/logo2.jpg">
        </div>
      
      <div class="name">
        <strong>
          App-Enhance
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          app-enhance/ae-docs
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/app-enhance/ae-docs/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/app-enhance/ae-docs/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Home" href="..">
      Home
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Dependency injection</span>
    <ul>
      
        
  <li>
    <a class="" title="Getting started" href="../dependency-injection/getting-started/">
      Getting started
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Features" href="../dependency-injection/features/">
      Features
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Customizations" href="../dependency-injection/customizations/">
      Customizations
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Integrations" href="../dependency-injection/integrations/">
      Integrations
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Roadmap" href="../dependency-injection/roadmap/">
      Roadmap
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="current" title="Contributing" href="./">
      Contributing
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="Build system" href="#build-system">
                Build system
              </a>
            </li>
          
            <li class="anchor">
              <a title="Coding style guidelines" href="#coding-style-guidelines">
                Coding style guidelines
              </a>
            </li>
          
            <li class="anchor">
              <a title="Unit tests and functional tests" href="#unit-tests-and-functional-tests">
                Unit tests and functional tests
              </a>
            </li>
          
            <li class="anchor">
              <a title="Solution and project folder structure and naming" href="#solution-and-project-folder-structure-and-naming">
                Solution and project folder structure and naming
              </a>
            </li>
          
        </ul>
      
    
  </li>

          
        </ul>
        
          <hr>
          <span class="section">The author</span>
          <ul>
            
            
              
              <li>
                <a href="https://github.com/ermesx" target="_blank" title="@ermesx on GitHub">
                  @ermesx on GitHub
                </a>
              </li>
            
          </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="contributing">Contributing<a class="headerlink" href="#contributing" title="Permanent link">#</a></h1>
<h2 id="build-system">Build system<a class="headerlink" href="#build-system" title="Permanent link">#</a></h2>
<p>Use a new system called <a href="https://github.com/aspnet/KoreBuild">KoreBuild</a>, which is built using the sake build tools.<br />
The sake project is available here: <a href="https://github.com/sakeproject/sake">https://github.com/sakeproject/sake</a></p>
<h2 id="coding-style-guidelines">Coding style guidelines<a class="headerlink" href="#coding-style-guidelines" title="Permanent link">#</a></h2>
<ol>
<li>Use <a href="http://en.wikipedia.org/wiki/Indent_style#Allman_style">Allman style</a> braces, where each brace begins on a new line.
   A single line statement block cannot go without braces because of nesting and readability.</li>
<li>Use four spaces of indentation (no tabs).</li>
<li>Use <code>_camelCase</code> for private fields and use <code>readonly</code> where possible.</li>
<li>Avoid <code>this.</code> unless absolutely necessary</li>
<li>Always specify member visibility, even if it's the default (i.e. <code>private string _foo;</code> not <code>string _foo;</code>)</li>
<li>Namespace imports should be specified at the top of the file, <em>inside</em> of <code>namespace</code> declarations and should be sorted
   alphabetically, with <code>System.</code> namespaces at the top and blank lines between different top level groups.</li>
<li>Avoid more than one empty line at any time. For example, do not have two blank lines between members of a type.</li>
<li>Avoid spurious free spaces. For example avoid <code>if (someVar == 0)...</code>, where the dots mark the spurious free spaces.
   Consider enabling "View White Space (Ctrl+E, S)" if using Visual Studio, to aid detection.</li>
<li>Use PascalCasing to name all our constant local variables and fields.</li>
</ol>
<h3 id="usage-of-the-var-keyword">Usage of the var keyword<a class="headerlink" href="#usage-of-the-var-keyword" title="Permanent link">#</a></h3>
<p>The <code>var</code> keyword is to be used as much as the compiler will allow.</p>
<div class="admonition note">
<p class="admonition-title">This is correct:</p>
</div>
<div class="code"><pre><span></span><span class="kt">var</span> <span class="n">fruit</span> <span class="p">=</span> <span class="s">&quot;Lychee&quot;</span><span class="p">;</span>
<span class="kt">var</span> <span class="n">fruits</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Fruit</span><span class="p">&gt;();</span>
<span class="kt">var</span> <span class="n">flavor</span> <span class="p">=</span> <span class="n">fruit</span><span class="p">.</span><span class="n">GetFlavor</span><span class="p">();</span>
<span class="kt">string</span> <span class="n">fruit</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span> <span class="c1">// can&#39;t use &quot;var&quot; because the type isn&#39;t known (though you could do (string)null, don&#39;t!)</span>
<span class="k">const</span> <span class="kt">string</span> <span class="n">expectedName</span> <span class="p">=</span> <span class="s">&quot;name&quot;</span><span class="p">;</span> <span class="c1">// can&#39;t use &quot;var&quot; with const</span>
</pre></div>


<div class="admonition warning">
<p class="admonition-title">The following are incorrect:</p>
</div>
<div class="code"><pre><span></span><span class="kt">string</span> <span class="n">fruit</span> <span class="p">=</span> <span class="s">&quot;Lychee&quot;</span><span class="p">;</span>
<span class="n">List</span><span class="p">&lt;</span><span class="n">Fruit</span><span class="p">&gt;</span> <span class="n">fruits</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Fruit</span><span class="p">&gt;();</span>
<span class="n">FruitFlavor</span> <span class="n">flavor</span> <span class="p">=</span> <span class="n">fruit</span><span class="p">.</span><span class="n">GetFlavor</span><span class="p">();</span>
</pre></div>


<h3 id="use-csharp-type-keywords-in-favor-of-net-type-names">Use csharp type keywords in favor of .NET type names<a class="headerlink" href="#use-csharp-type-keywords-in-favor-of-net-type-names" title="Permanent link">#</a></h3>
<p>When using a type that has a csharp keyword the keyword is used in favor of the .NET type name.</p>
<div class="admonition note">
<p class="admonition-title">This is correct:</p>
</div>
<div class="code"><pre><span></span><span class="k">public</span> <span class="kt">string</span> <span class="nf">TrimString</span><span class="p">(</span><span class="kt">string</span> <span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="kt">string</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="p">?</span> <span class="k">null</span>
        <span class="p">:</span> <span class="n">s</span><span class="p">.</span><span class="n">Trim</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">var</span> <span class="n">intTypeName</span> <span class="p">=</span> <span class="n">nameof</span><span class="p">(</span><span class="n">Int32</span><span class="p">);</span> <span class="c1">// can&#39;t use csharp type keywords with nameof</span>
</pre></div>


<div class="admonition warning">
<p class="admonition-title">The following are incorrect:</p>
</div>
<div class="code"><pre><span></span><span class="k">public</span> <span class="n">String</span> <span class="nf">TrimString</span><span class="p">(</span><span class="n">String</span> <span class="n">s</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">String</span><span class="p">.</span><span class="n">IsNullOrEmpty</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="p">?</span> <span class="k">null</span>
        <span class="p">:</span> <span class="n">s</span><span class="p">.</span><span class="n">Trim</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>


<h3 id="use-only-complete-words-or-commonstandard-abbreviations-in-public-apis">Use only complete words or common/standard abbreviations in public APIs<a class="headerlink" href="#use-only-complete-words-or-commonstandard-abbreviations-in-public-apis" title="Permanent link">#</a></h3>
<p>Public namespaces, type names, member names, and parameter names must use complete words or common/standard abbreviations.</p>
<div class="admonition note">
<p class="admonition-title">This is correct:</p>
</div>
<div class="code"><pre><span></span><span class="k">public</span> <span class="k">void</span> <span class="nf">AddReference</span><span class="p">(</span><span class="n">AssemblyReference</span> <span class="n">reference</span><span class="p">);</span>
<span class="k">public</span> <span class="n">EcmaScriptObject</span> <span class="n">SomeObject</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</pre></div>


<div class="admonition warning">
<p class="admonition-title">The following are incorrect:</p>
</div>
<div class="code"><pre><span></span><span class="k">public</span> <span class="k">void</span> <span class="nf">AddRef</span><span class="p">(</span><span class="n">AssemblyReference</span> <span class="k">ref</span><span class="p">);</span>
<span class="k">public</span> <span class="n">EcmaScriptObject</span> <span class="n">SomeObj</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="p">}</span>
</pre></div>


<h3 id="cross-platform-coding">Cross-platform coding<a class="headerlink" href="#cross-platform-coding" title="Permanent link">#</a></h3>
<p>Frameworks should work on CoreCLR, which supports multiple operating systems. Don't assume it only run (and develop) on Windows. Code should be sensitive to the differences between OS's. Here are some specifics to consider.</p>
<h4 id="line-breaks">Line breaks<a class="headerlink" href="#line-breaks" title="Permanent link">#</a></h4>
<p>Windows uses <code>\r\n</code>, OS X and Linux uses <code>\n</code>. When it is important, use <code>Environment.NewLine</code> instead of hard-coding the line break.</p>
<p>Note: this may not always be possible or necessary.</p>
<p>Be aware that these line-endings may cause problems in code when using <code>@""</code> text blocks with line breaks.</p>
<h4 id="environment-variables">Environment Variables<a class="headerlink" href="#environment-variables" title="Permanent link">#</a></h4>
<p>OS's use different variable names to represent similar settings. Code should consider these differences.</p>
<p>For example, when looking for the user's home directory, on Windows the variable is <code>USERPROFILE</code> but on most Linux systems it is <code>HOME</code>.</p>
<div class="code"><pre><span></span><span class="kt">var</span> <span class="n">homeDir</span> <span class="p">=</span> <span class="n">Environment</span><span class="p">.</span><span class="n">GetEnvironmentVariable</span><span class="p">(</span><span class="s">&quot;USERPROFILE&quot;</span><span class="p">)</span>
                  <span class="p">??</span> <span class="n">Environment</span><span class="p">.</span><span class="n">GetEnvironmentVariable</span><span class="p">(</span><span class="s">&quot;HOME&quot;</span><span class="p">);</span>
</pre></div>


<h4 id="file-path-separators">File path separators<a class="headerlink" href="#file-path-separators" title="Permanent link">#</a></h4>
<p>Windows uses <code>\</code> and OS X and Linux use <code>/</code> to separate directories. Instead of hard-coding either type of slash, use <a href="https://msdn.microsoft.com/en-us/library/system.io.path.combine(v=vs.110).aspx"><code>Path.Combine()</code></a> or <a href="https://msdn.microsoft.com/en-us/library/system.io.path.directoryseparatorchar(v=vs.110).aspx"><code>Path.DirectorySeparatorChar</code></a>.</p>
<p>If this is not possible (such as in scripting), use a forward slash. Windows is more forgiving than Linux in this regard.</p>
<h4 id="conditional-compilation-for-desktopcoreclr">Conditional compilation for Desktop/CoreCLR<a class="headerlink" href="#conditional-compilation-for-desktopcoreclr" title="Permanent link">#</a></h4>
<p>Almost all development is done for both CoreCLR and Desktop .NET. Some code will be CoreCLR-specific or Desktop-specific because of API changes or behavior differences. The build system has two conditional compilation statements to assist with this:</p>
<p>Desktop:</p>
<div class="code"><pre><span></span><span class="err">#</span><span class="n">ifdef</span> <span class="n">DNX451</span>
</pre></div>


<p>CoreCLR:</p>
<div class="code"><pre><span></span><span class="err">#</span><span class="n">ifdef</span> <span class="n">DNXCORE50</span>
</pre></div>


<h3 id="when-to-use-internals-vs-public-and-when-to-use-internalsvisibleto">When to use internals vs. public and when to use InternalsVisibleTo<a class="headerlink" href="#when-to-use-internals-vs-public-and-when-to-use-internalsvisibleto" title="Permanent link">#</a></h3>
<p>As a modern set of frameworks, usage of internal types and members is allowed, but discouraged.</p>
<p><code>InternalsVisibleTo</code> is used only to allow a unit test to test internal types and members of its runtime assembly. Do not use <code>InternalsVisibleTo</code> between two runtime assemblies.</p>
<p>If two runtime assemblies need to share common helpers then use a "shared source" solution with build-time only packages. Check out the <a href="https://github.com/aspnet/Mvc/tree/dev/src/Microsoft.AspNet.Mvc.Common">https://github.com/aspnet/Mvc/tree/dev/src/Microsoft.AspNet.Mvc.Common</a> project and how it is referenced from the <code>project.json</code> files of sibling projects.</p>
<p>If two runtime assemblies need to call each other's APIs, the APIs must be public. If it is need it, it is likely that other customers need it.</p>
<h3 id="extension-method-patterns">Extension method patterns<a class="headerlink" href="#extension-method-patterns" title="Permanent link">#</a></h3>
<p>The general rule is: if a regular static method would suffice, avoid extension methods.</p>
<p>Extension methods are often useful to create chainable method calls, for example, when constructing complex objects, or creating queries.</p>
<p>Internal extension methods are allowed, but bear in mind the previous guideline: ask yourself if an extension method is truly the most appropriate pattern.</p>
<p>The namespace of the extension method class should generally be the namespace that represents the functionality of the extension method, as opposed to the namespace of the target type. One common exception to this is that the namespace for middleware extension methods is normally always the same is the namespace of <code>IAppBuilder</code>.</p>
<p>The class name of an extension method container (also known as a "sponsor type") should generally follow the pattern of <code>&lt;Feature&gt;Extensions</code>, <code>&lt;Target&gt;&lt;Feature&gt;Extensions</code>, or <code>&lt;Feature&gt;&lt;Target&gt;Extensions</code>. For example:</p>
<div class="code"><pre><span></span><span class="k">namespace</span> <span class="nn">Food</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Fruit</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
<span class="p">}</span>

<span class="k">namespace</span> <span class="nn">Fruit.Eating</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">FruitExtensions</span> <span class="p">{</span> <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Eat</span><span class="p">(</span><span class="k">this</span> <span class="n">Fruit</span> <span class="n">fruit</span><span class="p">);</span> <span class="p">}</span>
  <span class="n">OR</span>
    <span class="k">class</span> <span class="nc">FruitEatingExtensions</span> <span class="p">{</span> <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Eat</span><span class="p">(</span><span class="k">this</span> <span class="n">Fruit</span> <span class="n">fruit</span><span class="p">);</span> <span class="p">}</span>
  <span class="n">OR</span>
    <span class="k">class</span> <span class="nc">EatingFruitExtensions</span> <span class="p">{</span> <span class="k">public</span> <span class="k">static</span> <span class="k">void</span> <span class="n">Eat</span><span class="p">(</span><span class="k">this</span> <span class="n">Fruit</span> <span class="n">fruit</span><span class="p">);</span> <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>When writing extension methods for an interface the sponsor type name must not start with an <code>I</code>.</p>
<h3 id="assertions">Assertions<a class="headerlink" href="#assertions" title="Permanent link">#</a></h3>
<p>Use <code>Debug.Assert()</code> to assert a condition in the code. Do not use Code Contracts (e.g. <code>Contract.Assert</code>).</p>
<p>Please note that assertions are only for our own internal debugging purposes. They do not end up in the released code, so to alert a developer of a condition use an exception.</p>
<h2 id="unit-tests-and-functional-tests">Unit tests and functional tests<a class="headerlink" href="#unit-tests-and-functional-tests" title="Permanent link">#</a></h2>
<p>Use <a href="https://xunit.github.io">xUnit.net</a> for all unit testing.</p>
<h3 id="assembly-naming">Assembly naming<a class="headerlink" href="#assembly-naming" title="Permanent link">#</a></h3>
<p>The unit tests for the <code>Microsoft.Fruit</code> assembly live in the <code>Microsoft.Fruit.Tests</code> assembly.</p>
<p>The functional tests for the <code>Microsoft.Fruit</code> assembly live in the <code>Microsoft.Fruit.FunctionalTests</code> assembly.</p>
<p>In general there should be exactly one unit test assembly for each product runtime assembly. In general there should be one functional test assembly per repo. Exceptions can be made for both.</p>
<h3 id="unit-test-class-naming">Unit test class naming<a class="headerlink" href="#unit-test-class-naming" title="Permanent link">#</a></h3>
<p>Test class names end with <code>Test</code> and live in the same namespace as the class being tested. For example, the unit tests for the <code>Microsoft.Fruit.Banana</code> class would be in a <code>Microsoft.Fruit.BananaTest</code> class in the test assembly.</p>
<h3 id="unit-test-method-naming">Unit test method naming<a class="headerlink" href="#unit-test-method-naming" title="Permanent link">#</a></h3>
<p>Unit test method names must be descriptive about <em>what is being tested</em>, <em>under what conditions</em>, and <em>what the expectations are</em>. Pascal casing and underscores can be used to improve readability. The following test names are correct:</p>
<div class="admonition note">
<p class="admonition-title">This is correct:</p>
</div>
<div class="code"><pre><span></span>PublicApiArgumentsShouldHaveNotNullAnnotation
Public_api_arguments_should_have_not_null_annotation
</pre></div>


<div class="admonition warning">
<p class="admonition-title">The following test names are incorrect:</p>
</div>
<div class="code"><pre><span></span>Test1
Constructor
FormatString
GetData
</pre></div>


<h3 id="unit-test-structure">Unit test structure<a class="headerlink" href="#unit-test-structure" title="Permanent link">#</a></h3>
<p>The contents of every unit test should be split into three distinct stages, optionally separated by these comments:</p>
<div class="code"><pre><span></span><span class="c1">// Arrange  </span>
<span class="c1">// Act  </span>
<span class="c1">// Assert</span>
</pre></div>


<p>The crucial thing here is that the <code>Act</code> stage is exactly one statement. That one statement is nothing more than a call to the one method that you are trying to test. Keeping that one statement as simple as possible is also very important. For example, this is not ideal:</p>
<div class="code"><pre><span></span><span class="kt">int</span> <span class="n">result</span> <span class="p">=</span> <span class="n">myObj</span><span class="p">.</span><span class="n">CallSomeMethod</span><span class="p">(</span><span class="n">GetComplexParam1</span><span class="p">(),</span> <span class="n">GetComplexParam2</span><span class="p">(),</span> <span class="n">GetComplexParam3</span><span class="p">());</span>
</pre></div>


<p>This style is not recommended because way too many things can go wrong in this one statement. All the <code>GetComplexParamN()</code> calls can throw for a variety of reasons unrelated to the test itself. It is thus unclear to someone running into a problem why the failure occurred.</p>
<p>The ideal pattern is to move the complex parameter building into the <code>Arrange</code> section:</p>
<div class="code"><pre><span></span><span class="c1">// Arrange</span>
<span class="n">P1</span> <span class="n">p1</span> <span class="p">=</span> <span class="n">GetComplexParam1</span><span class="p">();</span>
<span class="n">P2</span> <span class="n">p2</span> <span class="p">=</span> <span class="n">GetComplexParam2</span><span class="p">();</span>
<span class="n">P3</span> <span class="n">p3</span> <span class="p">=</span> <span class="n">GetComplexParam3</span><span class="p">();</span>

<span class="c1">// Act</span>
<span class="kt">int</span> <span class="n">result</span> <span class="p">=</span> <span class="n">myObj</span><span class="p">.</span><span class="n">CallSomeMethod</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">);</span>

<span class="c1">// Assert</span>
<span class="n">Assert</span><span class="p">.</span><span class="n">AreEqual</span><span class="p">(</span><span class="m">1234</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
</pre></div>


<p>Now the only reason the line with <code>CallSomeMethod()</code> can fail is if the method itself blew up. This is especially important when you're using helpers such as <code>ExceptionHelper</code>, where the delegate you pass into it must fail for exactly one reason.</p>
<h3 id="testing-exception-messages">Testing exception messages<a class="headerlink" href="#testing-exception-messages" title="Permanent link">#</a></h3>
<p>In general testing the specific exception message in a unit test is important. This ensures that the exact desired exception is what is being tested rather than a different exception of the same type. In order to verify the exact exception it is important to verify the message.</p>
<p>To make writing unit tests easier it is recommended to compare the error message to the RESX resource. However, comparing against a string literal is also permitted.</p>
<div class="code"><pre><span></span><span class="kt">var</span> <span class="n">ex</span> <span class="p">=</span> <span class="n">Assert</span><span class="p">.</span><span class="n">Throws</span><span class="p">&lt;</span><span class="n">InvalidOperationException</span><span class="p">&gt;(()</span> <span class="p">=&gt;</span> <span class="n">fruitBasket</span><span class="p">.</span><span class="n">GetBananaById</span><span class="p">(</span><span class="m">1234</span><span class="p">));</span>
<span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">Strings</span><span class="p">.</span><span class="n">FormatInvalidBananaID</span><span class="p">(</span><span class="m">1234</span><span class="p">),</span> <span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
</pre></div>


<h3 id="use-xunitnets-plethora-of-built-in-assertions">Use xUnit.net's plethora of built-in assertions<a class="headerlink" href="#use-xunitnets-plethora-of-built-in-assertions" title="Permanent link">#</a></h3>
<p>xUnit.net includes many kinds of assertions – please use the most appropriate one for your test. This will make the tests a lot more readable and also allow the test runner report the best possible errors (whether it's local or the CI machine). For example:</p>
<div class="admonition warning">
<p class="admonition-title">The following are incorrect:</p>
</div>
<div class="code"><pre><span></span><span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="k">true</span><span class="p">,</span> <span class="n">someBool</span><span class="p">);</span>
<span class="n">Assert</span><span class="p">.</span><span class="n">True</span><span class="p">(</span><span class="s">&quot;abc123&quot;</span> <span class="p">==</span> <span class="n">someString</span><span class="p">);</span>
<span class="n">Assert</span><span class="p">.</span><span class="n">True</span><span class="p">(</span><span class="n">list1</span><span class="p">.</span><span class="n">Length</span> <span class="p">==</span> <span class="n">list2</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">list1</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
<span class="p">{</span>
    <span class="n">Assert</span><span class="p">.</span><span class="n">True</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="n">Equals</span><span class="p">,</span> <span class="n">list1</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">list2</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">StringComparison</span><span class="p">.</span><span class="n">OrdinalIgnoreCase</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>


<div class="admonition note">
<p class="admonition-title">This is good:</p>
</div>
<div class="code"><pre><span></span><span class="n">Assert</span><span class="p">.</span><span class="n">True</span><span class="p">(</span><span class="n">someBool</span><span class="p">);</span>
<span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="s">&quot;abc123&quot;</span><span class="p">,</span> <span class="n">someString</span><span class="p">);</span>

<span class="c1">// built-in collection assertions!</span>
<span class="n">Assert</span><span class="p">.</span><span class="n">Equal</span><span class="p">(</span><span class="n">list1</span><span class="p">,</span> <span class="n">list2</span><span class="p">,</span> <span class="n">StringComparer</span><span class="p">.</span><span class="n">OrdinalIgnoreCase</span><span class="p">);</span>
</pre></div>


<h3 id="parallel-tests">Parallel tests<a class="headerlink" href="#parallel-tests" title="Permanent link">#</a></h3>
<p>By default all unit test assemblies should run in parallel mode, which is the default. Unit tests shouldn't depend on any shared state, and so should generally be runnable in parallel. If the tests fail in parallel, the first thing to do is to figure out <em>why</em>; do not just disable parallel tests!</p>
<p>For functional tests it is reasonable to disable parallel tests.</p>
<h2 id="solution-and-project-folder-structure-and-naming">Solution and project folder structure and naming<a class="headerlink" href="#solution-and-project-folder-structure-and-naming" title="Permanent link">#</a></h2>
<p>Solution files go in the repo root.</p>
<p>Solution names match repo names (e.g. Mvc.sln in the Mvc repo).</p>
<p>Every project also needs a <code>project.json</code> and a matching <code>.xproj</code> file. This <code>project.json</code> is the source of truth for a project's dependencies and configuration options.</p>
<p>Solutions need to contain solution folders that match the physical folders (<code>src</code>, <code>test</code>, etc.).</p>
<p>For example, in the <code>Fruit</code> repo with the <code>Banana</code> and <code>Lychee</code> projects you would have these files checked in:</p>
<div class="code"><pre><span></span>/Fruit.sln
/src
/src/Fruit.Banana
/src/Fruit.Banana/project.json
/src/Fruit.Banana/Banana.kproj
/src/Fruit.Banana/Banana.cs
/src/Fruit.Banana/Util/BananaUtil.cs
/src/Fruit.Lychee
/src/Fruit.Lychee/project.json
/src/Fruit.Lychee/Lychee.kproj
/src/Fruit.Lychee/Lychee.cs
/src/Fruit.Lychee/Util/LycheeUtil.cs
/test
/test/Fruit.Banana.Tests
/test/Fruit.Banana.Tests/project.json
/test/Fruit.Banana.Tests/BananaTest.kproj
/test/Fruit.Banana.Tests/BananaTest.cs
/test/Fruit.Banana.Tests/Util/BananaUtilTest.cs
</pre></div>


<p>Note that after running the <code>build</code> command the system will generate the following files:</p>
<div class="code"><pre><span></span>/build/*.shade
</pre></div>


<p>All these files are set to be ignored in the <code>.gitignore</code> file.</p>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../dependency-injection/roadmap/" title="Roadmap">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Roadmap
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = 'app-enhance/ae-docs';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>